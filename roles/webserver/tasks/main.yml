---
- name: install podman and git
  dnf:
    name: podman,git
    state: latest

- name: stop and remove test-app-container
  ansible.builtin.shell:
    cmd: docker stop test-app-container && docker rm test-app-container || /bin/true
  become_user: ansible

- name: install nodejs v14.x
  ansible.builtin.dnf:
    name: "@nodejs:14"
    state: present

- name: Create .ssh dir
  ansible.builtin.file:
    path: /home/ansible/.ssh
    state: directory
  become_user: ansible

- name: upload github ssh deploy keys
  ansible.builtin.copy:
    src: github-id_rsa
    dest: /home/ansible/.ssh/github-id_rsa
  become_user: ansible